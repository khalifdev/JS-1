<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>JS 1. Lesson 3. Быки и коровы</title>
    <script>
    
        // Игра "Быки и коровы"
        var k = 4;  // количество знаков в загаданном числе
        var number, secretNumber = [];
        // Генерируем secretNumber
        for(var i=0; i<k; i++){
            if (i == 0){
                secretNumber.push(Math.round(Math.random() * 9));
            }
            else {
                // Проверяем на уникальность каждую цифру
                do{
                   number = Math.round(Math.random() * 9);
                } while (secretNumber.indexOf(number) != -1);
                secretNumber.push(number);
            }
        }
        alert(secretNumber);        
        
        // Первый ввод числа
        var test = prompt("Угадайте число (-1 - выход)");
        var cow = 0, bull = 0;  // Коровы и быки
        var attempts = 0;   // Число попыток

        while ((test != -1) && (attempts < 3)){            
            // Цикл проверки числа
            for(var i=0; i<test.length; i++){
                if(!isNaN(test[i])){
                    for(var j=0; j<k; j++){
                        if (test[i] == secretNumber[j]){
                            if (i==j){
                                bull++;
                            }
                            cow++;
                        }                
                    }
                }
                else{
                    alert("Вы не ввели число!");
                    break;
                }
            }
            // Проверяем условие выигрыша
            if ((test.length == k) && (bull == k)){
                alert("Вы угадали число! Количество попыток " + ++attempts);
                break;
            }
            else {
                test = prompt("Коров: " + cow + " Быков: " + bull + " Попробуйте ещё раз.(-1 - выход)");
                cow = 0;
                bull = 0;
                attempts++;
                if (attempts == 3) alert("Попытки исчерпаны!");
            }
        }
        
        alert("Спасибо за игру!");
    </script>
</head>
<body>
    
</body>
</html>